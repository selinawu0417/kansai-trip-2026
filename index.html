<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026æ—¥æœ¬æ—…éŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { 
            background-color: #f3f4f6; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-card { animation: slideUp 0.3s ease-out forwards; }

        .checkbox-wrapper input:checked + div {
            background-color: #2563eb;
            border-color: #2563eb;
        }
        .checkbox-wrapper input:checked + div svg {
            display: block;
        }

        .tag-food { color: #d97706; font-weight: bold; background-color: #fffbeb; padding: 0 4px; border-radius: 4px; }
        .tag-buy { color: #be185d; font-weight: bold; background-color: #fce7f3; padding: 0 4px; border-radius: 4px; }
        .tag-tip { color: #059669; font-weight: bold; }
        
        .weather-loading { animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
    </style>
</head>
<body class="pb-24 select-none">

    <div class="bg-gradient-to-br from-indigo-700 via-blue-600 to-blue-500 text-white p-6 pb-14 rounded-b-[2.5rem] shadow-xl relative overflow-hidden">
        <div class="relative z-10">
            <div class="flex justify-between items-start">
                <div>
                    <h1 class="text-2xl font-bold tracking-tight">2026æ—¥æœ¬æ—…éŠ- äº¬éƒ½ çµç¶æ¹– å¥ˆè‰¯ å¤§é˜ª</h1>
                    <p class="text-blue-100 text-sm mt-1 font-medium">2026/02/13 â€” 02/20 (8å¤©)</p>
                </div>
                <div class="bg-white/20 backdrop-blur-md rounded-lg p-2 text-center min-w-[4.5rem]">
                    <div class="text-xs text-blue-100 mb-1" id="weather-location">è¼‰å…¥ä¸­</div>
                    <div class="text-xl font-bold flex items-center justify-center gap-1" id="weather-display">
                        <i class="fas fa-circle-notch fa-spin text-sm"></i>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-3 mt-6">
                <a href="https://translate.google.com/?sl=ja&tl=zh-TW" target="_blank" class="flex items-center justify-center gap-2 bg-blue-600 border border-blue-500 text-white py-2.5 rounded-xl shadow-md transition active:scale-95 hover:bg-blue-700">
                    <i class="fas fa-language"></i> <span>Googleç¿»è­¯</span>
                </a>
                <a href="https://www.google.com/maps/dir/?api=1&destination=KOKO+HOTEL+Osaka+Namba+Sennichimae" target="_blank" class="flex items-center justify-center gap-2 bg-blue-600 border border-blue-500 text-white py-2.5 rounded-xl shadow-md transition active:scale-95 hover:bg-blue-700">
                    <i class="fas fa-map-marked-alt"></i> <span>è¡Œç¨‹åœ°åœ–</span>
                </a>
            </div>
        </div>
        <div class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"></div>
    </div>

    <div class="sticky top-0 z-30 bg-[#f3f4f6]/95 backdrop-blur-sm pt-2 pb-1">
        <div class="-mt-10 px-4 mb-2">
            <div id="tabs-container" class="flex gap-2 overflow-x-auto no-scrollbar py-2 px-1 snap-x">
                </div>
        </div>
    </div>

    <div id="content-area" class="px-4 space-y-4 min-h-[50vh]">
        </div>

    <div class="text-center text-gray-400 text-xs mt-10 mb-4">
         Chou Family Trip in 2026
    </div>

    <script>
        // ==========================================
        // 1. è¡Œç¨‹è³‡æ–™ (å·²ä¿®æ­£ ç¬¬ä¸€å¤©æ™šé¤èˆ‡åœ°åœ–)
        // ==========================================
        const tripData = [
            {
                day: "D1",
                date: "2/13 (äº”)",
                area: "å°åŒ— âœˆï¸ äº¬éƒ½",
                lat: 35.0116, lon: 135.7681, 
                events: [
                    { time: "14:20", title: "é£›å¾€å¤§é˜ªé—œè¥¿", desc: "æ¡ƒåœ’æ©Ÿå ´ç¬¬äºŒèˆªå»ˆ TPE â†’ KIX (é è¨ˆ 17:50 æŠµé”)", type: "flight", icon: "fa-plane-departure" },
                    { time: "18:30", title: "Haruka ç›´é”äº¬éƒ½", desc: "æ©Ÿå ´å‰å¾€äº¬éƒ½ç«™ (ç´„ 75 åˆ†é˜)", type: "transport", icon: "fa-train" },
                    { time: "20:00", title: "å…¥ä½ï¼šEmion äº¬éƒ½", desc: "æ¢…å°è·¯äº¬éƒ½è¥¿ç«™æ—", type: "hotel", icon: "fa-suitcase", link: "https://www.google.com/maps/search/?api=1&query=Hotel+Emion+Kyoto" },
                    { time: "20:30", title: "æ™šé¤ï¼šTsujiya Umekoji Kita", desc: "ç‚­ç«ä¸²ç‡’ï¼Œå°±åœ¨é£¯åº—é™„è¿‘æ–¹ä¾¿ç¾å‘³ã€‚", type: "food", icon: "fa-utensils", link: "https://maps.app.goo.gl/DXAeWLfXbXnp6XMJ7" }
                ]
            },
            {
                day: "D2",
                date: "2/14 (å…­)",
                area: "äº¬éƒ½æ–‡åŒ–æ¢ç´¢",
                lat: 35.0116, lon: 135.7681, 
                events: [
                    { time: "09:00", title: "ä¼è¦‹ç¨»è·å¤§ç¤¾", desc: "åƒæœ¬é³¥å±…ã€‚", type: "spot", icon: "fa-torii-gate", link: "https://www.google.com/maps/search/?api=1&query=Fushimi+Inari+Taisha" },
                    { time: "12:00", title: "éŒ¦å¸‚å ´åˆé¤", desc: "æ¨è–¦<span class='tag-food'>é®®é­šæœ¨æ‘</span>ã€‚", type: "food", icon: "fa-fish", link: "https://www.google.com/maps/search/?api=1&query=Nishiki+Market" },
                    { time: "14:00", title: "æ¸…æ°´å¯ºæ•£ç­–", desc: "æ¸…æ°´å¯º â†’ äºŒå¹´å‚ â†’ ä¸‰å¹´å‚ã€‚", type: "spot", icon: "fa-shoe-prints", link: "https://www.google.com/maps/search/?api=1&query=Kiyomizu-dera" },
                    { time: "å®¿", title: "çºŒä½ Emion äº¬éƒ½", desc: "", type: "hotel", icon: "fa-bed", link: "https://www.google.com/maps/search/?api=1&query=Hotel+Emion+Kyoto" }
                ]
            },
            {
                day: "D3",
                date: "2/15 (æ—¥)",
                area: "é‡‘é–£å¯º ğŸš— çµç¶æ¹–",
                lat: 35.0394, lon: 135.7292, 
                events: [
                    { time: "11:00", title: "äº¬éƒ½ç«™å–è»Š (TOYOTA)", desc: "è»Šå‹ï¼šSIENTA Hybrid (W1)", type: "car", icon: "fa-car", link: "https://www.google.com/maps/search/?api=1&query=Toyota+Rent+a+Car+Kyoto+Station+Shinkansen" },
                    { time: "17:00", title: "å…¥ä½ï¼šç¶ æ°´äº­", desc: "æˆ¿å…§æ³¡æ¹¯è³æ¹–æ™¯ã€‚", type: "hotel", icon: "fa-hot-tub", link: "https://www.google.com/maps/search/?api=1&query=Biwako+Ryokusuitei" }
                ]
            },
            {
                day: "D4",
                date: "2/16 (ä¸€)",
                area: "çµç¶æ¹–æ»‘é›ªè¶£",
                lat: 35.0533, lon: 135.9138, 
                events: [
                    { time: "09:30", title: "çµç¶æ¹– Valley æ»‘é›ª", desc: "å…¨æ—¥æ»‘é›ª/ç©é›ªç›†ï¼", type: "snow", icon: "fa-snowflake", link: "https://www.google.com/maps/search/?api=1&query=Biwako+Valley" },
                    { time: "å®¿", title: "çºŒä½ï¼šç¶ æ°´äº­", desc: "", type: "hotel", icon: "fa-bed", link: "https://www.google.com/maps/search/?api=1&query=Biwako+Ryokusuitei" }
                ]
            },
            {
                day: "D5",
                date: "2/17 (äºŒ)",
                area: "å¥ˆè‰¯å°é¹¿ ğŸš— å¤§é˜ª",
                lat: 34.6851, lon: 135.8048, 
                events: [
                    { time: "10:30", title: "å¥ˆè‰¯å…¬åœ’ & æ±å¤§å¯º", desc: "èˆ‡å°é¹¿è¿‘è·é›¢æ¥è§¸ã€‚", type: "spot", icon: "fa-deer", link: "https://www.google.com/maps/search/?api=1&query=Nara+Park" },
                    { time: "19:00", title: "é›£æ³¢é‚„è»Š (TOYOTA)", desc: "é›£æ³¢å·´å£«ä¸­å¿ƒåº— (Namba Terminal)", type: "transport", icon: "fa-check-circle", link: "https://www.google.com/maps/search/?api=1&query=Toyota+Rent+a+Car+Namba+Terminal" },
                    { time: "19:30", title: "å…¥ä½ï¼šKOKO HOTEL é›£æ³¢åƒæ—¥å‰", desc: "Check-in æ”¾ç½®è¡Œæã€‚", type: "hotel", icon: "fa-hotel", link: "https://www.google.com/maps/search/?api=1&query=KOKO+HOTEL+Osaka+Namba+Sennichimae" },
                    { time: "20:00", title: "é»‘é–€å¸‚å ´æ™šé¤", desc: "ç¾é£Ÿå·¡ç¦®ã€‚", type: "food", icon: "fa-drumstick-bite", link: "https://www.google.com/maps/search/?api=1&query=Kuromon+Market" }
                ]
            },
            {
                day: "D6",
                date: "2/18 (ä¸‰)",
                area: "å¤©ç‹å¯ºè¦ªå­éŠ",
                lat: 34.6937, lon: 135.5023, 
                events: [
                    { time: "09:30", title: "å¤©ç‹å¯ºå‹•ç‰©åœ’", desc: "ğŸ¦ å­©å­çš„æœ€æ„›ã€‚", type: "spot", icon: "fa-hippo", link: "https://www.google.com/maps/search/?api=1&query=Tennoji+Zoo" },
                    { time: "18:00", title: "é˜¿å€é‡ Qâ€™s Mall", desc: "å¥½é€›å¥½è²·ã€‚", type: "shop", icon: "fa-shopping-cart", link: "https://www.google.com/maps/search/?api=1&query=Abeno+Qs+Mall" },
                    { time: "å®¿", title: "çºŒä½ KOKO HOTEL é›£æ³¢", desc: "ä½æ–¼åƒæ—¥å‰ã€‚", type: "hotel", icon: "fa-bed", link: "https://www.google.com/maps/search/?api=1&query=KOKO+HOTEL+Osaka+Namba+Sennichimae" }
                ]
            },
            {
                day: "D7",
                date: "2/19 (å››)",
                area: "æµ·éŠé¤¨ & æ¢…ç”°",
                lat: 34.6937, lon: 135.5023, 
                events: [
                    { time: "09:30", title: "æµ·éŠé¤¨", desc: "å¿…çœ‹é¯¨é¯Šé¤µé£Ÿç§€ã€‚", type: "spot", icon: "fa-fish", link: "https://www.google.com/maps/search/?api=1&query=Osaka+Aquarium+Kaiyukan" },
                    { time: "å®¿", title: "çºŒä½ KOKO HOTEL é›£æ³¢", desc: "", type: "hotel", icon: "fa-bed", link: "https://www.google.com/maps/search/?api=1&query=KOKO+HOTEL+Osaka+Namba+Sennichimae" }
                ]
            },
            {
                day: "D8",
                date: "2/20 (äº”)",
                area: "å¤§é˜ª âœˆï¸ å°åŒ—",
                lat: 34.4320, lon: 135.2304, 
                events: [
                    { time: "10:30", title: "å‰å¾€æ©Ÿå ´", desc: "å—æµ·é›»éµé›£æ³¢ç«™ç›´é”æ©Ÿå ´ã€‚", type: "transport", icon: "fa-bus", link: "https://www.google.com/maps/search/?api=1&query=Namba+Station" },
                    { time: "14:30", title: "é£›å¾€å°åŒ—", desc: "KIX 14:30 â†’ TPE 16:45", type: "flight", icon: "fa-plane-arrival" }
                ]
            }
        ];

        const checklistData = [
            {
                category: "å¿…å‚™è­‰ä»¶ & é‡‘éŒ¢",
                items: ["è­·ç…§", "æ—¥æ–‡é§•ç…§è­¯æœ¬", "VJW QR Code", "æ—¥å¹£ç¾é‡‘", "ä¿¡ç”¨å¡", "eSIM/ç¶²å¡"]
            }
        ];

        const infoData = {
            flights: [
                { leg: "å»ï¼šTPE â†’ KIX", code: "CI172", time: "14:20 - 17:50", route: "2/13" },
                { leg: "å›ï¼šKIX â†’ TPE", code: "CI153", time: "14:30 - 16:45", route: "2/20" }
            ],
            hotels: [
                { name: "äº¬éƒ½ Emion é£¯åº—", address: "äº¬éƒ½å¸‚ä¸‹äº¬å€æœ±é›€å ‚ä¹‹å£ç”º20-4", map: "https://www.google.com/maps/search/?api=1&query=Hotel+Emion+Kyoto" },
                { name: "çµç¶æ¹–ç¶ æ°´äº­", address: "æ»‹è³€ç¸£å¤§æ´¥å¸‚é›„ç´6-1-6", map: "https://www.google.com/maps/search/?api=1&query=Biwako+Ryokusuitei" },
                { name: "KOKO HOTEL å¤§é˜ªé›£æ³¢åƒæ—¥å‰", address: "å¤§é˜ªåºœå¤§é˜ªå¸‚ä¸­å¤®åŒºé›£æ³¢åƒæ—¥å‰1-3-7", map: "https://www.google.com/maps/search/?api=1&query=KOKO+HOTEL+Osaka+Namba+Sennichimae" }
            ]
        };

        // ==========================================
        // 4. ç¨‹å¼é‚è¼¯ (ä¿æŒä¸è®Š)
        // ==========================================
        const tabsContainer = document.getElementById('tabs-container');
        const contentArea = document.getElementById('content-area');
        const weatherLocation = document.getElementById('weather-location');
        const weatherDisplay = document.getElementById('weather-display');
        let activeIndex = 0;

        async function fetchWeather(lat, lon, areaName) {
            weatherLocation.innerText = areaName;
            weatherDisplay.innerHTML = '<i class="fas fa-circle-notch fa-spin text-sm"></i>';
            try {
                const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
                const data = await response.json();
                const temp = Math.round(data.current_weather.temperature);
                weatherDisplay.innerHTML = `<i class="fas fa-sun"></i> ${temp}Â°`;
            } catch (error) {
                weatherDisplay.innerText = "N/A";
            }
        }

        function renderTabs() {
            tabsContainer.innerHTML = '';
            tripData.forEach((item, index) => {
                const isActive = index === activeIndex;
                const btn = document.createElement('div');
                btn.className = `flex-shrink-0 w-16 h-18 flex flex-col items-center justify-center rounded-2xl cursor-pointer transition-all duration-300 snap-center ${isActive ? 'bg-blue-600 text-white shadow-lg' : 'bg-white text-gray-500 shadow-sm'}`;
                btn.innerHTML = `<span class="text-[10px]">${item.date.split(' ')[0]}</span><span class="text-xl font-bold">${item.day}</span>`;
                btn.onclick = () => { activeIndex = index; renderTabs(); renderContent(); };
                tabsContainer.appendChild(btn);
            });

            const infoBtn = document.createElement('div');
            infoBtn.className = `flex-shrink-0 w-16 h-18 flex flex-col items-center justify-center rounded-2xl cursor-pointer transition-all snap-center ${activeIndex === 100 ? 'bg-emerald-500 text-white' : 'bg-white text-gray-500'}`;
            infoBtn.innerHTML = `<span class="text-[10px]">Info</span><span class="text-xl"><i class="fas fa-info-circle"></i></span>`;
            infoBtn.onclick = () => { activeIndex = 100; renderTabs(); renderInfo(); };
            tabsContainer.appendChild(infoBtn);
        }

        function renderContent() {
            const data = tripData[activeIndex];
            contentArea.innerHTML = '';
            fetchWeather(data.lat, data.lon, data.area.split(' ')[0]);

            data.events.forEach((event, idx) => {
                let style = { bg: "bg-white", border: "border-gray-200" };
                if(event.type === 'hotel') style = { bg: "bg-indigo-50", border: "border-indigo-500" };
                if(event.type === 'flight') style = { bg: "bg-blue-600 text-white", border: "border-none" };

                const card = document.createElement('div');
                card.className = `${style.bg} border-l-[6px] ${style.border} rounded-2xl p-4 shadow-sm animate-card flex gap-4 items-start mb-4`;
                card.innerHTML = `
                    <div class="w-12 text-center flex-shrink-0">
                        <div class="text-xs font-bold">${event.time}</div>
                        <i class="fas ${event.icon} text-xl mt-1"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h3 class="font-bold text-lg">${event.title}</h3>
                        <p class="text-sm opacity-80">${event.desc}</p>
                        ${event.link ? `<a href="${event.link}" target="_blank" class="inline-block mt-2 text-[10px] bg-gray-600 text-white px-3 py-1 rounded-full"><i class="fas fa-location-arrow"></i> å°èˆª</a>` : ''}
                    </div>
                `;
                contentArea.appendChild(card);
            });
        }

        function renderInfo() {
            contentArea.innerHTML = '<h2 class="text-2xl font-bold mb-4">æ—…è¡Œè³‡è¨Šä¸­å¿ƒ</h2>';
            let hotelHtml = infoData.hotels.map(h => `<div class="bg-white p-4 rounded-xl shadow-sm mb-3"><strong>${h.name}</strong><br><small>${h.address}</small><br><a href="${h.map}" target="_blank" class="text-blue-500 text-xs">é–‹å•Ÿåœ°åœ–</a></div>`).join('');
            contentArea.insertAdjacentHTML('beforeend', hotelHtml);
        }

        renderTabs();
        renderContent();
    </script>
</body>
</html>
