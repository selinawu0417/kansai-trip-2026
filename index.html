<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026æ—¥æœ¬æ—…éŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { 
            background-color: #f3f4f6; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-card { animation: slideUp 0.3s ease-out forwards; }

        /* è‡ªè¨‚æ ¸å–æ–¹å¡Šæ¨£å¼ */
        .checkbox-wrapper input:checked + div {
            background-color: #2563eb;
            border-color: #2563eb;
        }
        .checkbox-wrapper input:checked + div svg {
            display: block;
        }

        /* æ™ºæ…§æ¨™ç±¤æ¨£å¼ */
        .tag-food { color: #d97706; font-weight: bold; background-color: #fffbeb; padding: 0 4px; border-radius: 4px; }
        .tag-buy { color: #be185d; font-weight: bold; background-color: #fce7f3; padding: 0 4px; border-radius: 4px; }
        .tag-tip { color: #059669; font-weight: bold; }
        
        /* å¤©æ°£è¼‰å…¥å‹•ç•« */
        .weather-loading { animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
    </style>
</head>
<body class="pb-24 select-none">

    <div class="bg-gradient-to-br from-indigo-700 via-blue-600 to-blue-500 text-white p-6 pb-14 rounded-b-[2.5rem] shadow-xl relative overflow-hidden">
        <div class="relative z-10">
            <div class="flex justify-between items-start">
                <div>
                    <h1 class="text-2xl font-bold tracking-tight">2026æ—¥æœ¬æ—…éŠ- äº¬éƒ½ çµç¶æ¹– å¤§é˜ª</h1>
                    <p class="text-blue-100 text-sm mt-1 font-medium">2026/02/13 â€” 02/20 (8å¤©)</p>
                </div>
                <div class="bg-white/20 backdrop-blur-md rounded-lg p-2 text-center min-w-[4.5rem]">
                    <div class="text-xs text-blue-100 mb-1" id="weather-location">è¼‰å…¥ä¸­</div>
                    <div class="text-xl font-bold flex items-center justify-center gap-1" id="weather-display">
                        <i class="fas fa-circle-notch fa-spin text-sm"></i>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-3 mt-6">
                <a href="https://translate.google.com/?sl=ja&tl=zh-TW" target="_blank" class="flex items-center justify-center gap-2 bg-white/10 backdrop-blur-md hover:bg-white/20 border border-white/20 text-white py-2.5 rounded-xl transition active:scale-95">
                    <i class="fas fa-language"></i> <span>ç¿»è­¯ç¥å™¨</span>
                </a>
                <a href="https://www.google.com/maps/d/u/0/edit?mid=1RhaNPO47PFwrJeCtCYdUwIZQnbpAc3w&ll=34.8172408728509%2C135.57010455&z=9" target="_blank" class="flex items-center justify-center gap-2 bg-white text-blue-600 py-2.5 rounded-xl shadow-lg font-bold transition active:scale-95">
                    <i class="fas fa-map-marked-alt"></i> <span>è¡Œç¨‹åœ°åœ–</span>
                </a>
            </div>
        </div>
        <div class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"></div>
    </div>

    <div class="sticky top-0 z-30 bg-[#f3f4f6]/95 backdrop-blur-sm pt-2 pb-1">
        <div class="-mt-10 px-4 mb-2">
            <div id="tabs-container" class="flex gap-2 overflow-x-auto no-scrollbar py-2 px-1 snap-x">
                </div>
        </div>
    </div>

    <div id="content-area" class="px-4 space-y-4 min-h-[50vh]">
        </div>

    <div class="text-center text-gray-400 text-xs mt-10 mb-4">
        Made for 2026 Trip
    </div>

    <script>
        // ==========================================
        // 1. è¡Œç¨‹è³‡æ–™ (å…§å®¹ç¶­æŒä¸è®Šï¼Œåƒ…åŠ å…¥ lat/lon åº§æ¨™ä¾›å¤©æ°£ä½¿ç”¨)
        // ==========================================
        const tripData = [
            {
                day: "D1",
                date: "2/13 (äº”)",
                area: "å°åŒ— âœˆï¸ äº¬éƒ½",
                lat: 35.0116, lon: 135.7681, // äº¬éƒ½
                events: [
                    { time: "14:20", title: "é£›å¾€å¤§é˜ªé—œè¥¿", desc: "æ¡ƒåœ’ TPE â†’ KIX (é è¨ˆ 17:50 æŠµé”)ï¼Œæ©Ÿä¸Šå»ºè­°å…ˆå¡«å¥½å…¥å¢ƒå¡ã€‚", type: "flight", icon: "fa-plane-departure" },
                    { time: "18:30", title: "Haruka ç›´é”äº¬éƒ½", desc: "æ©Ÿå ´å‰å¾€äº¬éƒ½ç«™ (ç´„ 75 åˆ†é˜)ï¼Œ<span class='tag-tip'>è¨˜å¾—ç”¨ QR Code å–ç¥¨</span>ã€‚", type: "transport", icon: "fa-train" },
                    { time: "20:00", title: "å…¥ä½ï¼šEmion äº¬éƒ½", desc: "å°±åœ¨æ¢…å°è·¯äº¬éƒ½è¥¿ç«™æ—ï¼Œé€™é–“é£¯åº—ä½ç½®è¶…å¥½ï¼", type: "hotel", icon: "fa-suitcase", link: "https://www.google.com/maps/search/?api=1&query=Hotel+Emion+Kyoto" },
                    { time: "20:30", title: "æ™šé¤ï¼šèšæ¨‚ç¬¬", desc: "äº¬éƒ½ç«™å‰å±…é…’å±‹ï¼Œå¿…é» <span class='tag-food'>é—œæ±ç…®</span> èˆ‡ <span class='tag-food'>ä¸²ç‡’</span>ã€‚", type: "food", icon: "fa-utensils", link: "https://www.google.com/maps/search/?api=1&query=Kyoto+Ekimae+Bar+Jurakudai" }
                ]
            },
            {
                day: "D2",
                date: "2/14 (å…­)",
                area: "äº¬éƒ½æ–‡åŒ–æ¢ç´¢",
                lat: 35.0116, lon: 135.7681, // äº¬éƒ½
                events: [
                    { time: "09:00", title: "ä¼è¦‹ç¨»è·å¤§ç¤¾", desc: "åƒæœ¬é³¥å±…ï¼Œå»ºè­° <span class='tag-tip'>09:00 å‰æŠµé”</span> é¿é–‹äººæ½®æ‹ç…§ã€‚", type: "spot", icon: "fa-torii-gate", link: "https://www.google.com/maps/search/?api=1&query=Fushimi+Inari+Taisha" },
                    { time: "12:00", title: "éŒ¦å¸‚å ´åˆé¤", desc: "æ¨è–¦ï¼š<span class='tag-food'>é®®é­šæœ¨æ‘</span>ã€<span class='tag-food'>æŠ¹èŒ¶ç”œé»</span>ã€è±†ä¹³ç”œç”œåœˆã€‚", type: "food", icon: "fa-fish", link: "https://www.google.com/maps/search/?api=1&query=Nishiki+Market" },
                    { time: "14:00", title: "æ¸…æ°´å¯ºæ•£ç­–", desc: "æ¸…æ°´å¯º â†’ äºŒå¹´å‚ â†’ ä¸‰å¹´å‚ã€‚å¿…è²·ï¼š<span class='tag-buy'>ä¸ƒå‘³ç²‰</span>ã€<span class='tag-buy'>æ¸…æ°´ç‡’</span>ã€‚", type: "spot", icon: "fa-shoe-prints", link: "https://www.google.com/maps/search/?api=1&query=Kiyomizu-dera" },
                    { time: "18:00", title: "ç¥‡åœ’èŠ±è¦‹å°è·¯", desc: "å¤è‰²å¤é¦™çš„è¡—é“æ•£æ­¥ï¼Œé‹æ°£å¥½å¯çœ‹åˆ°è—å¦“ã€‚", type: "spot", icon: "fa-camera", link: "https://www.google.com/maps/search/?api=1&query=Hanamikoji+Street" },
                    { time: "å®¿", title: "çºŒä½ Emion äº¬éƒ½", desc: "", type: "hotel", icon: "fa-bed" }
                ]
            },
            {
                day: "D3",
                date: "2/15 (æ—¥)",
                area: "è‡ªé§• ğŸš— é›„ç´æº«æ³‰",
                lat: 35.0533, lon: 135.9138, // çµç¶æ¹–(å¤§æ´¥)
                events: [
                    { time: "09:00", title: "äº¬éƒ½ç«™å–è»Š (ORIX)", desc: "åœ°é»ï¼šäº¬éƒ½ç«™å…«æ¢å£åº—ã€‚<span class='tag-tip'>å‹™å¿…æ”œå¸¶ï¼šå°ç£é§•ç…§ + æ—¥æ–‡è­¯æœ¬</span>ã€‚", type: "car", icon: "fa-car", link: "https://www.google.com/maps/search/?api=1&query=ORIX+Rent-A-Car+Kyoto+Station+Hachijo+Exit" },
                    { time: "10:30", title: "æŠµé”é›„ç´æº«æ³‰", desc: "è¡Œæå…ˆå¯„æ”¾ã€Œçµç¶æ¹–ç¶ æ°´äº­ã€ã€‚", type: "hotel", icon: "fa-luggage-cart", link: "https://www.google.com/maps/search/?api=1&query=Biwako+Ryokusuitei" },
                    { time: "11:00", title: "çµç¶æ¹– Valley æ»‘é›ª", desc: "å°èˆªè‡³ 'çµç¶æ¹– Valley çºœè»Šå£'ã€‚å°å­©ç©é›ªç›†ï¼Œè¨˜å¾—æˆ´<span class='tag-tip'>é˜²æ°´æ‰‹å¥—</span>ã€‚", type: "snow", icon: "fa-snowflake", link: "https://www.google.com/maps/search/?api=1&query=Biwako+Valley+Ropeway+Station" },
                    { time: "12:30", title: "å±±é ‚åˆé¤", desc: "CafÃ© 360 ç»ç’ƒæ™¯è§€å’–å•¡ï¼Œæœ‰å°å­©å–œæ­¡çš„ <span class='tag-food'>å’–å“©é£¯</span>ã€‚", type: "food", icon: "fa-hamburger" },
                    { time: "16:00", title: "å…¥ä½ï¼šç¶ æ°´äº­", desc: "æˆ¿å…§æ³¡æ¹¯è³æ¹–æ™¯ï¼Œæ™šé¤äº«ç”¨ <span class='tag-food'>æ‡·çŸ³æ–™ç†</span>ã€‚", type: "hotel", icon: "fa-hot-tub" }
                ]
            },
            {
                day: "D4",
                date: "2/16 (ä¸€)",
                area: "çµç¶æ¹–ç©é›ª/è§€å…‰",
                lat: 35.0533, lon: 135.9138, // çµç¶æ¹–(å¤§æ´¥)
                events: [
                    { time: "ä¸Šåˆ", title: "æ–¹æ¡ˆA: ç¹¼çºŒæ»‘é›ª", desc: "ä¸Šåˆå†ç©é›ªç›†+åˆå­¸ç·´ç¿’ã€‚", type: "snow", icon: "fa-skiing" },
                    { time: "ä¸Šåˆ", title: "æ–¹æ¡ˆB: çµç¶æ¹– Terrace", desc: "ç´”æ­çºœè»Šçœ‹é›²æµ·ç¾æ™¯ï¼Œ<span class='tag-tip'>å±±é ‚é¢¨å¤§è«‹ä¿æš–</span>ã€‚", type: "spot", icon: "fa-mountain", link: "https://www.google.com/maps/search/?api=1&query=Biwako+Terrace" },
                    { time: "ä¸‹åˆ", title: "ä¸‰äº• Outlet é¾ç‹", desc: "é—œè¥¿æœ€å¥½è²· Outletï¼æ¨è–¦å“ç‰Œï¼š<span class='tag-buy'>BEAMS</span>, <span class='tag-buy'>Nike</span>, <span class='tag-buy'>Montbell</span>ã€‚", type: "shop", icon: "fa-shopping-bag", link: "https://www.google.com/maps/search/?api=1&query=Mitsui+Outlet+Park+Shiga+Ryuo" },
                    { time: "å®¿", title: "çºŒä½ ç¶ æ°´äº­", desc: "äº«å—æœ€å¾Œä¸€æ™šæº«æ³‰ã€‚", type: "hotel", icon: "fa-bed" }
                ]
            },
            {
                day: "D5",
                date: "2/17 (äºŒ)",
                area: "ç§»å‹• ğŸš— å¤§é˜ª",
                lat: 34.6937, lon: 135.5023, // å¤§é˜ª
                events: [
                    { time: "09:30", title: "å‡ºç™¼å‰å¾€å¤§é˜ª", desc: "åç¥é«˜é€Ÿ â†’ é˜ªç¥é«˜é€Ÿ (ç´„ 1.5 å°æ™‚)ã€‚", type: "car", icon: "fa-car-side" },
                    { time: "11:30", title: "ORIX æœ¬ç”ºé‚„è»Š", desc: "å°èˆªè‡³ï¼šORIX Rent-a-car Hommachiã€‚<span class='tag-tip'>é‚„è»Šå‰è¨˜å¾—åŠ æ»¿æ²¹</span>ã€‚", type: "transport", icon: "fa-check-circle", link: "https://www.google.com/maps/search/?api=1&query=ORIX+Rent-A-Car+Honmachi" },
                    { time: "12:30", title: "å…¥ä½ï¼šKOKO HOTEL", desc: "å¿ƒé½‹æ©‹åˆ†é¤¨ (Minamisenba)ï¼Œå¾é‚„è»Šé»èµ°è·¯å°±åˆ°ã€‚", type: "hotel", icon: "fa-hotel", link: "https://www.google.com/maps/search/?api=1&query=KOKO+HOTEL+Osaka+Shinsaibashi" },
                    { time: "14:00", title: "å¤§é˜ªåŸå…¬åœ’", desc: "å°å­©æ”¾é›»è·‘è·‘ï¼Œå¯æ­å°ç«è»Šã€‚", type: "spot", icon: "fa-tree", link: "https://www.google.com/maps/search/?api=1&query=Osaka+Castle+Park" },
                    { time: "æ™šé¤", title: "é»‘é–€å¸‚å ´", desc: "å¿…åƒï¼š<span class='tag-food'>ç¾çƒ¤å’Œç‰›</span>ã€<span class='tag-food'>æµ·è†½</span>ã€<span class='tag-food'>è±†æ¼¿</span>ã€‚", type: "food", icon: "fa-drumstick-bite", link: "https://www.google.com/maps/search/?api=1&query=Kuromon+Ichiba+Market" }
                ]
            },
            {
                day: "D6",
                date: "2/18 (ä¸‰)",
                area: "å¤©ç‹å¯ºè¦ªå­éŠ",
                lat: 34.6937, lon: 135.5023, // å¤§é˜ª
                events: [
                    { time: "09:30", title: "å¤©ç‹å¯ºå‹•ç‰©åœ’", desc: "ğŸ¦ å­©å­çš„æœ€æ„›ï¼Œå¯ç§Ÿå€Ÿæ¨è»Šã€‚", type: "spot", icon: "fa-hippo", link: "https://www.google.com/maps/search/?api=1&query=Tennoji+Zoo" },
                    { time: "14:00", title: "HARUKAS 300", desc: "é«˜ç©ºå±•æœ›å°æ‹ç…§ï¼Œ<span class='tag-tip'>å‚æ™šå¤•é™½æœ€ç¾</span>ã€‚", type: "spot", icon: "fa-cloud", link: "https://www.google.com/maps/search/?api=1&query=Harukas+300" },
                    { time: "16:00", title: "é˜¿å€é‡ Qâ€™s Mall", desc: "å¥½é€›å¥½è²·ï¼Œæ™šé¤åœ¨æ­¤è§£æ±º (æœ‰ç¾é£Ÿè¡—)ã€‚", type: "shop", icon: "fa-shopping-cart", link: "https://www.google.com/maps/search/?api=1&query=Abeno+Q's+Mall" },
                    { time: "å®¿", title: "çºŒä½ KOKO HOTEL", desc: "", type: "hotel", icon: "fa-bed" }
                ]
            },
            {
                day: "D7",
                date: "2/19 (å››)",
                area: "å¤§é˜ªæ¸¯å€ä¸€æ—¥éŠ",
                lat: 34.6937, lon: 135.5023, // å¤§é˜ª
                events: [
                    { time: "09:30", title: "æµ·éŠé¤¨", desc: "ä¸–ç•Œç´šæ°´æ—é¤¨ï¼Œå¿…çœ‹ <span class='tag-food'>é¯¨é¯Š</span> é¤µé£Ÿç§€ã€‚", type: "spot", icon: "fa-fish", link: "https://www.google.com/maps/search/?api=1&query=Osaka+Aquarium+Kaiyukan" },
                    { time: "13:00", title: "å¤©ä¿å±±æ‘©å¤©è¼ª", desc: "æ¬£è³æ¸¯å€é¢¨æ™¯ï¼Œæœ‰é€æ˜è»Šå»‚å¯é¸ã€‚", type: "spot", icon: "fa-dharmachakra", link: "https://www.google.com/maps/search/?api=1&query=Tempozan+Ferris+Wheel" },
                    { time: "14:30", title: "LEGO Discovery", desc: "æ¨‚é«˜æ¨‚åœ’å®¤å…§ç©æ¨‚ï¼Œé©åˆé›¨å‚™ã€‚", type: "spot", icon: "fa-cubes", link: "https://www.google.com/maps/search/?api=1&query=Legoland+Discovery+Center+Osaka" },
                    { time: "17:00", title: "è–ç‘ªéº—äºè™Ÿ", desc: "æ­èˆ¹çœ‹å¤•é™½ + æ¸¯ç£æ‘æ™šé¤ã€‚", type: "spot", icon: "fa-ship", link: "https://www.google.com/maps/search/?api=1&query=Santa+Maria+Cruise" }
                ]
            },
            {
                day: "D8",
                date: "2/20 (äº”)",
                area: "å¤§é˜ª âœˆï¸ å°åŒ—",
                lat: 34.6937, lon: 135.5023, // å¤§é˜ª
                events: [
                    { time: "ä¸Šåˆ", title: "æœ€å¾Œè¡åˆº", desc: "æ¢…ç”°åœ°ä¸‹è¡— / å¤§é˜ªç«™æ¡è²·ä¼´æ‰‹ç¦® (<span class='tag-buy'>Baton d'or</span>, <span class='tag-buy'>EchirÃ©</span>)ã€‚", type: "shop", icon: "fa-gift", link: "https://www.google.com/maps/search/?api=1&query=Umeda+Underground+Shopping+Street" },
                    { time: "11:30", title: "å‰å¾€æ©Ÿå ´", desc: "å—æµ·é›»éµ or åˆ©æœ¨æ´¥å·´å£« (é ç•™ 60 åˆ†é˜è»Šç¨‹)ã€‚", type: "transport", icon: "fa-bus" },
                    { time: "14:30", title: "é£›å¾€å°åŒ—", desc: "KIX 14:30 â†’ TPE 16:45ï¼ŒæœŸå¾…ä¸‹æ¬¡æ—…è¡Œï¼", type: "flight", icon: "fa-plane-arrival" },
                    { time: "16:45", title: "æŠµé”", desc: "ç”œèœœçš„å®¶ã€‚", type: "home", icon: "fa-home" }
                ]
            }
        ];

        // ==========================================
        // 2. æª¢æŸ¥è¡¨è³‡æ–™ (å…§å®¹ç¶­æŒæ‚¨æä¾›çš„åŸå§‹ç‰ˆæœ¬ä¸è®Š)
        // ==========================================
        const checklistData = [
            {
                category: "å¿…å‚™è­‰ä»¶ & é‡‘éŒ¢",
                items: [
                    "è­·ç…§ (æœ‰æ•ˆæœŸ6å€‹æœˆä»¥ä¸Š)",
                    "æ—¥æ–‡é§•ç…§è­¯æœ¬",
                    "å°ç£é§•ç…§",
                    "Visit Japan Web QR Code æˆªåœ–",
                    "é›»å­æ©Ÿç¥¨å­˜æ‰‹æ©Ÿ",
                    "æ—¥å¹£ç¾é‡‘",
                    "æµ·å¤–é«˜å›é¥‹ä¿¡ç”¨å¡",
                    "æœ‰é å…ˆåˆ·æ©Ÿç¥¨æˆ–ä½å®¿çš„ä¿¡ç”¨å¡",
                    "å¯¦é«”ç¶²å¡ / eSIM / æ¼«éŠé–‹é€š",
                    "æ›å¡é‡ (å¦‚ç”¨å¯¦é«”ç¶²å¡)",
                    "iPhone è¥¿ç“œå¡ (Suica) ç¶å®š",
                    "æ—¥æœ¬å…¥å¢ƒé å¡«æ–‡ä»¶å°å‡º",
                    "é ç´„è³‡æ–™å½±æœ¬ (æ©Ÿç¥¨/ä½å®¿/ç§Ÿè»Š/è­·ç…§)"
                ]
            },
            {
                category: "å†¬å­£ç©¿æ­ (2æœˆå¾ˆå†·!)",
                items: [
                    "ç¾½çµ¨ä¿æš–å¤–å¥—",
                    "ç™¼ç†±è¡£",
                    "å¤§äººé˜²å¯’è¡£ç‰©",
                    "å°å­©é˜²å¯’è¡£ç‰©",
                    "æ¯›å¸½ (é®è€³)",
                    "æ‰‹å¥— (æ»‘é›ªå¿…å‚™)",
                    "åœå·¾ / è„–åœ",
                    "åšè¥ªå­",
                    "æš–æš–åŒ… (è²¼å¼/æ‰‹æ¡)",
                    "é›ªé‹ (é˜²æ°´ä½³)", 
                    "å¥½èµ°çš„é‹ (è¡Œèµ°ä½³)",
                    "ä¸€å¤§å…©å°è¡Œæç®±"
                ]
            },
            {
                category: "é›»å­ & é›œç‰©",
                items: [
                    "è¡Œå‹•é›»æº (è¦æ”¾åœ¨éš¨èº«è¡Œæ)",
                    "æ‰‹æ©Ÿå……é›»å™¨",
                    "æ’åº§ / å……é›»ç·š",
                    "è½‰æ¥é ­ (æ—¥æœ¬é›™å­”æ‰æ’ï¼Œå°ç£é€šç”¨)", 
                    "æ‹ç…§è…³æ¶ / è‡ªæ‹æ£’",
                    "ç’°ä¿è³¼ç‰©è¢‹",
                    "é›¨å‚˜ (æ‘ºç–Š)",
                    "å¸¸å‚™è—¥å“ (è…¸èƒƒ/æ„Ÿå†’/æšˆè»Š/é€€ç‡’/éæ•/å°‹éº»ç–¹/æ™®æ‹¿ç–¼)",
                    "ç›¥æ´—ç”¨å“ (ç‰™åˆ·/ç‰™è†/ç‰™ç·š)",
                    "åŒ–å¦å“ / ä¿é¤Šå“ (æ´—é¢ä¹³åŒ–å¦æ°´ä¹³æ¶²)",
                    "å°å­©ç¶é«®é£¾å“é«®ç®",                    
                    "å…æ´—è¤²",
                    "è­·å”‡è† / è­·æ‰‹éœœ",
                    "å¡‘è† è¢‹ (è£é«’è¡£/åƒåœ¾)",
                    "éš±å½¢çœ¼é¡ & è—¥æ°´",
                    "çœ¼é¡",
                    "è¡›ç”Ÿç´™ / æ¿•ç´™å·¾",
                    "è¡›ç”Ÿæ£‰",
                    "å‚™ç”¨å£ç½©",
                    "æ°´å£º / ä¿æº«ç“¶",
                    "è€³å¡ / çœ¼ç½©",                    
                    "æ‰‹æ©Ÿæ›ç¹©",   
                    "iPad (å…ˆä¸‹è¼‰å¥½é›¢ç·šå½±ç‰‡)"  
                ]
            }
        ];

        // ==========================================
        // 3. è³‡è¨Šä¸­å¿ƒè³‡æ–™ (åŠ å…¥å¯¦ç”¨é€£çµï¼Œå…¶é¤˜ç¶­æŒä¸è®Š)
        // ==========================================
        const infoData = {
            flights: [
                { leg: "å»ç¨‹", code: "CI172 / BR130", time: "14:20 - 17:50", route: "TPE â KIX" },
                { leg: "å›ç¨‹", code: "CI173 / BR129", time: "14:30 - 16:45", route: "KIX â TPE" }
            ],
            hotels: [
                { name: "äº¬éƒ½ Emion é£¯åº—", address: "äº¬éƒ½å¸‚ä¸‹äº¬å€æœ±é›€å ‚ä¹‹å£ç”º20-4", map: "https://www.google.com/maps/search/?api=1&query=Hotel+Emion+Kyoto" },
                { name: "çµç¶æ¹–ç¶ æ°´äº­", address: "æ»‹è³€ç¸£å¤§æ´¥å¸‚é›„ç´6-1-6", map: "https://www.google.com/maps/search/?api=1&query=Biwako+Ryokusuitei" },
                { name: "KOKO HOTEL å¤§é˜ªå¿ƒé½‹æ©‹", address: "å¤§é˜ªå¸‚ä¸­å¤®å€å—èˆ¹å ´3-3-17", map: "https://www.google.com/maps/search/?api=1&query=KOKO+HOTEL+Osaka+Shinsaibashi" }
            ],
            links: [
                { title: "çµç¶æ¹– Valley å³æ™‚å½±åƒ", desc: "å‡ºç™¼å‰å¿…çœ‹ï¼ç¢ºèªå±±ä¸Šé›ªæ³èˆ‡å¤©æ°£ã€‚", icon: "fa-video", color: "text-red-500", url: "https://www.biwako-valley.com/livecamera/" },
                { title: "JR è¥¿æ—¥æœ¬é‹è¡Œæƒ…å ±", desc: "å³æ™‚æŸ¥è©¢é›»è»Šæ˜¯å¦èª¤é»æˆ–åœé§›ã€‚", icon: "fa-train", color: "text-blue-600", url: "https://global.trafficinfo.westjr.co.jp/en/kansai" },
                { title: "å³æ™‚åŒ¯ç‡æ›ç®—", desc: "Google è²¡ç¶“æ—¥å¹£/å°å¹£å³æ™‚åŒ¯ç‡ã€‚", icon: "fa-calculator", color: "text-green-600", url: "https://www.google.com/finance/quote/JPY-TWD" }
            ],
            emergency: [
                { title: "è­¦å¯Ÿå±€", tel: "110" },
                { title: "ç«è­¦/æ•‘è­·è»Š", tel: "119" },
                { title: "é§å¤§é˜ªè¾¦äº‹è™• (æ€¥é›£)", tel: "+81-90-8794-4568" }
            ],
            guides: [
                {
                    title: "å…¥å¢ƒæ•™å­¸ï¼šVisit Japan Web",
                    content: "å…¥å¢ƒå¯©æŸ¥èˆ‡æµ·é—œç”³å ±å·²åˆä½µç‚º<span class='text-red-500 font-bold'>ä¸€å€‹ QR Code</span>ã€‚è«‹ä¸€äººä¸€ç¢¼ï¼Œä¸¦æˆªåœ–å‚™ç”¨ã€‚",
                    link: "https://vjw-lp.digital.go.jp/zh-hant/"
                },
                {
                    title: "é€€ç¨…èªªæ˜ (å…ç¨…)",
                    content: "åŒä¸€å¤©åŒä¸€åº—æ»¿ <span class='text-red-500 font-bold'>5,000 æ—¥åœ“</span> (æœªç¨…) å¯é€€ç¨…ã€‚æ¶ˆè€—å“æœƒå¯†å°ï¼Œæ—¥æœ¬å¢ƒå…§ä¸å¯æ‹†å°ã€‚"
                }
            ]
        };

        // ==========================================
        // 4. ç¨‹å¼é‚è¼¯ (æ–°å¢ API èˆ‡é€£çµé¡¯ç¤º)
        // ==========================================
        const tabsContainer = document.getElementById('tabs-container');
        const contentArea = document.getElementById('content-area');
        const weatherLocation = document.getElementById('weather-location');
        const weatherDisplay = document.getElementById('weather-display');
        let activeIndex = 0;

        // å–å¾—çœŸå¯¦å¤©æ°£ (ä½¿ç”¨ Open-Meteo å…è²» API)
        async function fetchWeather(lat, lon, areaName) {
            weatherLocation.innerText = areaName;
            weatherDisplay.innerHTML = '<i class="fas fa-circle-notch fa-spin text-sm"></i>';
            
            try {
                const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
                const data = await response.json();
                
                const temp = Math.round(data.current_weather.temperature);
                const code = data.current_weather.weathercode;
                
                // å¤©æ°£ä»£ç¢¼è½‰æ›åœ–ç¤º
                let icon = "fa-sun";
                if (code > 3) icon = "fa-cloud";
                if (code >= 51) icon = "fa-cloud-rain";
                if (code >= 71) icon = "fa-snowflake";
                
                // æ›´æ–°ä»‹é¢
                weatherDisplay.innerHTML = `<i class="fas ${icon}"></i> ${temp}Â°`;
            } catch (error) {
                weatherDisplay.innerText = "N/A";
            }
        }

        function renderTabs() {
            tabsContainer.innerHTML = '';
            
            tripData.forEach((item, index) => {
                const isActive = index === activeIndex;
                const btn = document.createElement('div');
                btn.className = `flex-shrink-0 w-16 h-18 flex flex-col items-center justify-center rounded-2xl cursor-pointer transition-all duration-300 snap-center ${isActive ? 'bg-blue-600 text-white shadow-lg scale-105 ring-2 ring-blue-300' : 'bg-white text-gray-500 shadow-sm'}`;
                btn.innerHTML = `<span class="text-[10px] font-medium opacity-80">${item.date.split(' ')[0]}</span><span class="text-xl font-bold">${item.day}</span>`;
                btn.onclick = () => { 
                    activeIndex = index; 
                    renderTabs(); 
                    renderContent(); 
                    btn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' }); 
                };
                tabsContainer.appendChild(btn);
            });

            const infoBtn = document.createElement('div');
            const isInfoActive = activeIndex === 100;
            infoBtn.className = `flex-shrink-0 w-16 h-18 flex flex-col items-center justify-center rounded-2xl cursor-pointer transition-all duration-300 snap-center ${isInfoActive ? 'bg-emerald-500 text-white shadow-lg scale-105 ring-2 ring-emerald-300' : 'bg-white text-gray-500 shadow-sm'}`;
            infoBtn.innerHTML = `<span class="text-[10px] font-medium opacity-80">Info</span><span class="text-xl font-bold"><i class="fas fa-info-circle"></i></span>`;
            infoBtn.onclick = () => { activeIndex = 100; renderTabs(); renderInfo(); infoBtn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' }); };
            tabsContainer.appendChild(infoBtn);

            const listBtn = document.createElement('div');
            const isListActive = activeIndex === 99;
            listBtn.className = `flex-shrink-0 w-16 h-18 flex flex-col items-center justify-center rounded-2xl cursor-pointer transition-all duration-300 snap-center ${isListActive ? 'bg-orange-500 text-white shadow-lg scale-105 ring-2 ring-orange-300' : 'bg-white text-gray-500 shadow-sm'}`;
            listBtn.innerHTML = `<span class="text-[10px] font-medium opacity-80">List</span><span class="text-xl font-bold"><i class="fas fa-tasks"></i></span>`;
            listBtn.onclick = () => { activeIndex = 99; renderTabs(); renderChecklist(); listBtn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' }); };
            tabsContainer.appendChild(listBtn);
        }

        function renderContent() {
            const data = tripData[activeIndex];
            contentArea.innerHTML = '';
            
            // å‘¼å«å¤©æ°£ API (æ ¹æ“šè©²æ—¥çš„åº§æ¨™)
            const locationName = data.area.includes("äº¬éƒ½") ? "äº¬éƒ½" : (data.area.includes("å¤§é˜ª") ? "å¤§é˜ª" : (data.area.includes("çµç¶æ¹–") ? "çµç¶æ¹–" : "æ—¥æœ¬"));
            fetchWeather(data.lat, data.lon, locationName);

            const headerHtml = `
                <div class="flex justify-between items-end mb-4 px-1 animate-card">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">${data.date}</h2>
                        <div class="flex items-center text-gray-500 text-sm mt-1"><i class="fas fa-map-marker-alt text-red-500 mr-1.5"></i> ${data.area}</div>
                    </div>
                </div>
            `;
            contentArea.insertAdjacentHTML('beforeend', headerHtml);

            data.events.forEach((event, idx) => {
                let style = { bg: "bg-white", border: "border-gray-200", text: "text-gray-800", icon: "text-gray-400" };
                
                if(event.type === 'flight') style = { bg: "bg-gradient-to-r from-sky-500 to-blue-600 text-white", border: "border-none", text: "text-white", icon: "text-white/80" };
                else if(event.type === 'snow') style = { bg: "bg-gradient-to-r from-cyan-400 to-sky-400 text-white", border: "border-none", text: "text-white", icon: "text-white/90" };
                else if(event.type === 'hotel') style = { bg: "bg-indigo-50", border: "border-indigo-500", text: "text-gray-800", icon: "text-indigo-500" };
                else if(event.type === 'food') style = { bg: "bg-orange-50", border: "border-orange-400", text: "text-gray-800", icon: "text-orange-500" };
                else if(event.type === 'spot') style = { bg: "bg-white", border: "border-green-500", text: "text-gray-800", icon: "text-green-500" };
                else if(event.type === 'car') style = { bg: "bg-zinc-100", border: "border-zinc-500", text: "text-gray-800", icon: "text-zinc-500" };

                const isDark = (event.type === 'flight' || event.type === 'snow');
                const btnClass = isDark ? 'bg-white/20 text-white hover:bg-white/30' : 'bg-blue-600 text-white shadow-md hover:bg-blue-700';

                const card = document.createElement('div');
                card.className = `${style.bg} border-l-[6px] ${style.border} rounded-2xl p-4 shadow-sm relative overflow-hidden animate-card flex gap-4 items-start mb-4`;
                card.style.animationDelay = `${idx * 50}ms`;
                
                card.innerHTML = `
                    <div class="flex flex-col items-center pt-1 w-12 text-center flex-shrink-0">
                        <div class="${isDark?'text-white/90':'text-gray-500'} text-xs font-bold mb-1">${event.time}</div>
                        <i class="fas ${event.icon} ${style.icon} text-xl"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h3 class="${style.text} font-bold text-lg leading-tight truncate">${event.title}</h3>
                        <p class="${isDark?'text-white/90':'text-gray-500'} text-sm mt-1 leading-relaxed">${event.desc}</p>
                        ${event.link ? `
                        <a href="${event.link}" target="_blank" class="inline-flex items-center mt-3 text-xs font-bold px-3 py-1.5 rounded-full ${btnClass} transition">
                            <i class="fas fa-location-arrow mr-1.5"></i> å°èˆªå»é€™è£¡
                        </a>` : ''}
                    </div>
                `;
                contentArea.appendChild(card);
            });
            contentArea.insertAdjacentHTML('beforeend', '<div class="h-8"></div>');
        }

        function renderChecklist() {
            contentArea.innerHTML = '';
            weatherLocation.innerText = "æ¸…å–®";
            weatherDisplay.innerHTML = '<i class="fas fa-check"></i>';

            const savedState = JSON.parse(localStorage.getItem('trip_checklist') || '{}');
            
            contentArea.insertAdjacentHTML('beforeend', '<div class="mb-4 px-1"><h2 class="text-2xl font-bold text-gray-800">è¡Œææª¢æŸ¥è¡¨</h2><p class="text-gray-500 text-sm mt-1">è‡ªå‹•å„²å­˜é€²åº¦</p></div>');

            checklistData.forEach((cat, idx) => {
                const section = document.createElement('div');
                section.className = "bg-white rounded-2xl p-5 shadow-sm mb-4 animate-card";
                section.style.animationDelay = `${idx * 100}ms`;
                
                const itemsHtml = cat.items.map(item => {
                    const checked = savedState[item] ? 'checked' : '';
                    return `<label class="checkbox-wrapper flex items-center gap-3 py-3 border-b last:border-0 border-gray-100 cursor-pointer"><input type="checkbox" class="hidden peer" value="${item}" ${checked} onchange="toggleCheck(this)"><div class="w-6 h-6 rounded-full border-2 border-gray-300 flex items-center justify-center transition-all peer-checked:bg-blue-500 peer-checked:border-blue-500"><svg class="w-3.5 h-3.5 text-white hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg></div><span class="text-gray-700 peer-checked:text-gray-400 peer-checked:line-through transition-all">${item}</span></label>`;
                }).join('');
                
                section.innerHTML = `<h3 class="font-bold text-lg text-blue-600 mb-2 border-l-4 border-blue-600 pl-3">${cat.category}</h3><div class="flex flex-col">${itemsHtml}</div>`;
                contentArea.appendChild(section);
            });
            contentArea.insertAdjacentHTML('beforeend', '<div class="h-8"></div>');
        }

        function renderInfo() {
            contentArea.innerHTML = '';
            weatherLocation.innerText = "è³‡è¨Š";
            weatherDisplay.innerHTML = '<i class="fas fa-info"></i>';
            
            contentArea.insertAdjacentHTML('beforeend', '<div class="mb-4 px-1"><h2 class="text-2xl font-bold text-gray-800">æ—…è¡Œè³‡è¨Šä¸­å¿ƒ</h2><p class="text-gray-500 text-sm mt-1">èˆªç­ã€ä½å®¿èˆ‡å¯¦ç”¨å·¥å…·</p></div>');

            // 0. å¯¦ç”¨é€£çµ (æ–°åŠŸèƒ½ï¼šåŒ…å«æ‚¨æåˆ°çš„å»ºè­°ç¶²ç«™)
            let linksHtml = infoData.links.map(l => `
                <a href="${l.url}" target="_blank" class="flex items-center gap-3 border-b last:border-0 border-gray-100 py-3 group">
                    <div class="w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center group-hover:bg-gray-100 transition"><i class="fas ${l.icon} ${l.color} text-lg"></i></div>
                    <div class="flex-1">
                        <div class="font-bold text-gray-800 flex items-center gap-2">${l.title} <i class="fas fa-external-link-alt text-xs text-gray-300"></i></div>
                        <div class="text-xs text-gray-500 mt-0.5">${l.desc}</div>
                    </div>
                </a>`).join('');
            contentArea.insertAdjacentHTML('beforeend', `<div class="bg-white rounded-2xl p-5 shadow-sm mb-4 animate-card"><h3 class="font-bold text-lg text-emerald-600 mb-2"><i class="fas fa-link"></i> å¯¦ç”¨å·¥å…·</h3>${linksHtml}</div>`);

            // 1. èˆªç­
            let flightHtml = infoData.flights.map(f => `
                <div class="flex justify-between items-center border-b last:border-0 border-gray-100 py-2">
                    <div><div class="text-xs text-gray-400">${f.leg}</div><div class="font-bold text-gray-800">${f.code}</div></div>
                    <div class="text-right"><div class="text-xs text-gray-400">${f.route}</div><div class="font-bold text-blue-600">${f.time}</div></div>
                </div>`).join('');
            contentArea.insertAdjacentHTML('beforeend', `<div class="bg-white rounded-2xl p-5 shadow-sm mb-4 animate-card" style="animation-delay: 100ms"><h3 class="font-bold text-lg text-indigo-600 mb-2"><i class="fas fa-plane"></i> èˆªç­è³‡è¨Š</h3>${flightHtml}</div>`);

            // 2. ä½å®¿
            let hotelHtml = infoData.hotels.map(h => `
                <div class="border-b last:border-0 border-gray-100 py-3">
                    <div class="font-bold text-gray-800">${h.name}</div>
                    <div class="text-xs text-gray-500 mt-1">${h.address}</div>
                    <a href="${h.map}" target="_blank" class="inline-block mt-2 text-xs bg-indigo-50 text-indigo-600 px-2 py-1 rounded border border-indigo-200">é–‹å•Ÿåœ°åœ–</a>
                </div>`).join('');
            contentArea.insertAdjacentHTML('beforeend', `<div class="bg-white rounded-2xl p-5 shadow-sm mb-4 animate-card" style="animation-delay: 200ms"><h3 class="font-bold text-lg text-indigo-600 mb-2"><i class="fas fa-bed"></i> ä½å®¿åˆ—è¡¨</h3>${hotelHtml}</div>`);

            // 3. ç·Šæ€¥
            let emerHtml = infoData.emergency.map(e => `
                <div class="flex justify-between items-center border-b last:border-0 border-gray-100 py-2">
                    <span class="text-gray-700">${e.title}</span>
                    <a href="tel:${e.tel}" class="font-bold text-red-500 bg-red-50 px-2 py-1 rounded"><i class="fas fa-phone-alt"></i> ${e.tel}</a>
                </div>`).join('');
            contentArea.insertAdjacentHTML('beforeend', `<div class="bg-white rounded-2xl p-5 shadow-sm mb-4 animate-card" style="animation-delay: 300ms"><h3 class="font-bold text-lg text-red-500 mb-2"><i class="fas fa-exclamation-triangle"></i> ç·Šæ€¥è¯çµ¡</h3>${emerHtml}</div>`);
            
            // 4. æŒ‡å—
            let guideHtml = infoData.guides.map(g => `
                <div class="mt-4 first:mt-0 p-3 bg-gray-50 rounded-lg">
                    <div class="font-bold text-gray-800 mb-1">${g.title}</div>
                    <div class="text-sm text-gray-600 leading-relaxed">${g.content}</div>
                    ${g.link ? `<a href="${g.link}" target="_blank" class="inline-block mt-2 text-xs text-blue-600 underline">é»æ­¤å‰å¾€ç¶²ç«™</a>` : ''}
                </div>`).join('');
            contentArea.insertAdjacentHTML('beforeend', `<div class="bg-white rounded-2xl p-5 shadow-sm mb-4 animate-card" style="animation-delay: 400ms"><h3 class="font-bold text-lg text-emerald-600 mb-2"><i class="fas fa-book"></i> å¿…è®€æŒ‡å—</h3>${guideHtml}</div>`);

            contentArea.insertAdjacentHTML('beforeend', '<div class="h-8"></div>');
        }

        window.toggleCheck = function(checkbox) {
            const savedState = JSON.parse(localStorage.getItem('trip_checklist') || '{}');
            if (checkbox.checked) savedState[checkbox.value] = true;
            else delete savedState[checkbox.value];
            localStorage.setItem('trip_checklist', JSON.stringify(savedState));
        };

        renderTabs();
        renderContent();
    </script>
</body>
</html>
